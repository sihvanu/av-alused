# Networking for Web Developers   -   KONSPEKT

## From Ping to HTTP

Ping on käsk testimiseks, kas arvuti saab võrguliiklust saata ja vastu võtta ühelt aadressilt teisele. Kogu interneti liiklus on jagatud sõnumiteks, mida nimetatakse pakkideks. Pakk on lühike sõnum, mis saadetakse ühest arvutist teise kasutades nende arvutite aadresse. Ping-käsku saates võtab vastuvõtja operatsioonisüsteem selle vastu ja saadab vastuse tagasi.

Netcat on vahend, et ühendada erinevaid servereid ning käituda ise serverina. NC ühendub pordiga ja saadab sõne (*string*)  (mis näeb välja nagu HTTP päring) veebiserverisse ning seejärel server vastab.

Võrguprotokollid koosnevad mitmest kihist. Ülemine kiht on rakenduskiht (*application layer*), näiteks HTTP on rakendusprotokoll. See kiht hõlmab URL, paroole, veebilehti jne. Rakendusprotokollid põhinevad transportkihiga protokollidel (nt TCP), mis pakuvad pordinumbreid. Transportkihi protokollid põhinevad internetikihil, millega kaasnevad IP-aadressid. IP-d töötavad erineva riistvara peal (nt wifi). Iga kiht sõltub temast vahetult allpool asuvast kihist. Mõned võrguprotokollid ei sobitu kirjeldatud mudelisse, kuid kõik protokollid sõltuvad IP-st.

Programm, mis kuulab TCP-porti, ootab, et teine programm ühenduks sellesse porti. Kui see juhtub, siis kaks programmi saavad saata andmeid edasi-tagasi. Pordinumbrid eristavad  sama peremeesarvuti (*host*) erinevaid rakendusi ja sessioone. Serveril on kindlad pordid eri rakenduste jaoks, näiteks port 80 HTTP jaoks. Klient (*client*) algatab ühenduse ning kliendipool ühendub suvalise pordiga enda pool. Seejärel saab operatsioonisüsteem eristada sissetulevat liiklust vaadates selle aadresse ja pordinumbreid. Enamus süsteemides on pordid 0-1023 reserveeritud programmidele, mis käivituvad vaid administraatori poolt. Tavaliselt saab ainult üks programm kuulata määratud porti korraga. Aga kui programm käivitub, siis see saab jooksutada lõimesid (*run threads*) või alamprotsesse, mis käsitlevad sissetulevaid ühendusi pordis. Teise võimalusena saab programm käsitleda tsüklis (*loop*) mitme ühenduse vahel kõiki korraga. Server käitub sedasi, et olla võimeline käsitlema mitut ühendust korraga. Netcat ei käitu nagu server - see on pigem kuulaja, mis ainult võtab vastu ühte ühendust korraga.

Brauserid ja serverid tegelevad mitme päringuga korraga. Kui brauser laeb serverist veebilehte, siis see peab laadima palju eri faile (HTML, pildid, CSS jne). Mida rohkem brauserid/serverid seda korraga suudavad teha, seda kiiremini kuvatakse veebileht ekraanile. Selleks on mitu võimalust, kuidas programmid saavad hallata mitut ühendust korraga. Üks lihtsamaid ja vanemaid on järgmine: kui tekib uus ühendus, siis server käsib op-süsteemil jagada see kaheks. Teine võimalus kehtib uuemate serverite kohta: serverid tekitavad protsessidest või lõimedest ühise kogumi, millest igaüks saab hallata üht ühendust korraga. See on kiirem võrreldes uue ühenduse loomiseks, kuid selle miinuseks on see, et peale teatud arvu päringute haldamist hakkab süsteem aeglustuma. Kolmas võimalus on järgmine: üksainus protsess vahetab kiiresti päringute haldamist, kui need vabanevad.
